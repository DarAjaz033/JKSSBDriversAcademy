import"./modulepreload-polyfill-B5Qt9EMX.js";document.addEventListener("contextmenu",e=>e.preventDefault());document.addEventListener("dragstart",e=>e.preventDefault());document.addEventListener("keydown",e=>{[e.ctrlKey&&e.key==="s",e.ctrlKey&&e.key==="p",e.ctrlKey&&e.key==="a",e.ctrlKey&&e.key==="c",e.ctrlKey&&e.shiftKey&&e.key==="I",e.key==="F12",e.ctrlKey&&e.key==="u",e.metaKey&&e.key==="s",e.metaKey&&e.key==="p"].some(Boolean)&&e.preventDefault()});document.addEventListener("auxclick",e=>{e.button===1&&e.preventDefault()});const s=document.getElementById("security-overlay");s.addEventListener("contextmenu",e=>e.preventDefault());s.addEventListener("dragstart",e=>e.preventDefault());const y=document.getElementById("canvas-scroll");s.addEventListener("wheel",e=>{y.scrollTop+=e.deltaY},{passive:!0});s.addEventListener("touchstart",h,{passive:!0});s.addEventListener("touchmove",w,{passive:!1});let u=0;function h(e){u=e.touches[0].clientY}function w(e){const t=u-e.touches[0].clientY;y.scrollTop+=t,u=e.touches[0].clientY,e.preventDefault()}const f=new URLSearchParams(window.location.search),p=f.get("url")||"",v=f.get("name")||"Document";document.getElementById("pdf-title").textContent=v;document.getElementById("loading-name").textContent=v;async function B(){return new Promise((e,t)=>{if(window.pdfjsLib){e();return}const n=document.createElement("script");n.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js",n.onload=()=>{window.pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",e()},n.onerror=t,document.head.appendChild(n)})}let l=null,o=1,a=0;const I=Math.min(window.innerWidth/600,1.8);async function b(e){if(!l)return;const t=await l.getPage(e),n=t.getViewport({scale:I}),d=document.createElement("div");d.className="page-canvas-wrap";const c=document.createElement("canvas");c.width=n.width,c.height=n.height;const i=c.getContext("2d");return await t.render({canvasContext:i,viewport:n}).promise,d.appendChild(c),d}async function k(){const e=document.getElementById("pages-wrap");e.innerHTML="";const t=document.getElementById("loading-progress");for(let n=1;n<=a;n++){t.textContent=`Rendering page ${n} of ${a}...`;const d=await b(n);e.appendChild(d)}}async function L(){if(!p){g("No PDF URL provided. Please go back and select a document.");return}try{await B();const e=window.pdfjsLib,t=await fetch(p,{mode:"cors",credentials:"omit"});if(!t.ok)throw new Error(`HTTP ${t.status}`);const n=await t.arrayBuffer();l=await e.getDocument({data:n}).promise,a=l.numPages,document.getElementById("total-pages").textContent=`/ ${a}`,document.getElementById("page-info").textContent=`1 / ${a}`,document.getElementById("page-input").max=String(a),await k(),x(),document.getElementById("loading").style.display="none"}catch(e){console.error("[PDFViewer]",e),g("Could not load the PDF. Please check your connection or try again.")}}function g(e){document.getElementById("loading").style.display="none";const t=document.getElementById("error-screen");t.style.display="flex",document.getElementById("error-msg").textContent=e}function r(e){o=Math.max(1,Math.min(e,a)),document.getElementById("page-input").value=String(o),document.getElementById("page-info").textContent=`${o} / ${a}`;const t=document.querySelectorAll(".page-canvas-wrap");t[o-1]&&t[o-1].scrollIntoView({behavior:"smooth",block:"start"}),m()}function m(){document.getElementById("btn-first").disabled=o<=1,document.getElementById("btn-prev").disabled=o<=1,document.getElementById("btn-next").disabled=o>=a,document.getElementById("btn-last").disabled=o>=a}function x(){document.getElementById("btn-first").addEventListener("click",()=>r(1)),document.getElementById("btn-prev").addEventListener("click",()=>r(o-1)),document.getElementById("btn-next").addEventListener("click",()=>r(o+1)),document.getElementById("btn-last").addEventListener("click",()=>r(a));const e=document.getElementById("page-input");e.addEventListener("change",()=>{const n=parseInt(e.value,10);isNaN(n)||r(n)});const t=document.getElementById("canvas-scroll");t.addEventListener("scroll",()=>{const n=document.querySelectorAll(".page-canvas-wrap"),d=t.scrollTop+80;let c=1;n.forEach((i,E)=>{i.offsetTop<=d&&(c=E+1)}),c!==o&&(o=c,e.value=String(o),document.getElementById("page-info").textContent=`${o} / ${a}`,m())},{passive:!0}),m()}L();
