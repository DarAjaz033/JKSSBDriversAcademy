import"./firebase-config-CsUtaHqz.js";/* empty css               */import{b as r,s as i,d as a,r as d}from"./auth-service-BYs2Equ7.js";import{i as n}from"./admin-service-WdanE3z8.js";class l{constructor(){this.form=document.getElementById("admin-login-form"),this.submitBtn=document.getElementById("submit-btn"),this.errorMessage=document.getElementById("error-message"),this.googleLoginBtn=document.getElementById("google-login-btn"),this.forgotPasswordLink=document.getElementById("forgot-password"),this.forgotModal=document.getElementById("forgot-modal"),this.closeModalBtn=document.getElementById("close-modal"),this.forgotForm=document.getElementById("forgot-form"),this.resetEmailInput=document.getElementById("reset-email"),this.resetBtn=document.getElementById("reset-btn"),this.resetStatus=document.getElementById("reset-status"),this.init()}init(){this.form.addEventListener("submit",t=>this.handleSubmit(t)),this.googleLoginBtn.addEventListener("click",()=>this.handleGoogleLogin()),this.forgotPasswordLink.addEventListener("click",()=>this.showForgotModal()),this.closeModalBtn.addEventListener("click",()=>this.hideForgotModal()),this.forgotForm.addEventListener("submit",t=>this.handleResetPassword(t)),this.forgotModal.addEventListener("click",t=>{t.target===this.forgotModal&&this.hideForgotModal()})}async handleSubmit(t){t.preventDefault();const e=document.getElementById("email").value,s=document.getElementById("password").value;this.submitBtn.disabled=!0,this.submitBtn.textContent="Signing in...",this.hideError();const o=await r(e,s);if(!o.success){this.showError(o.error||"Failed to sign in"),this.submitBtn.disabled=!1,this.submitBtn.textContent="Sign In";return}if(!(o.user&&await n(o.user))){await i(),this.showError("You do not have admin access"),this.submitBtn.disabled=!1,this.submitBtn.textContent="Sign In";return}sessionStorage.setItem("app_toast_msg","Admin access granted. Welcome back! ðŸ‘‹"),sessionStorage.setItem("app_toast_type","success"),window.location.href="./admin-dashboard.html"}async handleGoogleLogin(){this.googleLoginBtn.disabled=!0;const t=this.googleLoginBtn.innerHTML;this.googleLoginBtn.innerHTML="Signing in...",this.hideError();const e=await a();if(!e.success){this.showError(e.error||"Failed to sign in with Google"),this.googleLoginBtn.disabled=!1,this.googleLoginBtn.innerHTML=t;return}if(!(e.user&&await n(e.user))){await i(),this.showError("You do not have admin access"),this.googleLoginBtn.disabled=!1,this.googleLoginBtn.innerHTML=t;return}sessionStorage.setItem("app_toast_msg","Admin access granted. Welcome back! ðŸ‘‹"),sessionStorage.setItem("app_toast_type","success"),window.location.href="./admin-dashboard.html"}showForgotModal(){this.forgotModal.classList.add("show"),this.resetEmailInput.focus(),this.resetStatus.style.display="none"}hideForgotModal(){this.forgotModal.classList.remove("show"),this.forgotForm.reset()}async handleResetPassword(t){t.preventDefault();const e=this.resetEmailInput.value;this.resetBtn.disabled=!0,this.resetBtn.textContent="Sending...",this.resetStatus.style.display="none";const s=await d(e);this.resetBtn.disabled=!1,this.resetBtn.textContent="Send Reset Link",s.success?(this.resetStatus.textContent="Reset link sent! Please check your email.",this.resetStatus.style.background="#ECFDF5",this.resetStatus.style.color="#059669",this.resetStatus.style.display="block"):(this.resetStatus.textContent=s.error||"Failed to send reset link",this.resetStatus.style.background="#FEF2F2",this.resetStatus.style.color="#B91C1C",this.resetStatus.style.display="block")}showError(t){this.errorMessage.textContent=t,this.errorMessage.classList.add("show")}hideError(){this.errorMessage.classList.remove("show")}}new l;
